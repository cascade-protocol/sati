/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from "@solana/kit";
import { SATI_PROGRAM_ADDRESS } from "../programs";

/** InvalidGroupMint: Invalid group mint - must be owned by Token-2022 with TokenGroup extension */
export const SATI_ERROR__INVALID_GROUP_MINT = 0x1770; // 6000
/** InvalidAuthority: Invalid authority */
export const SATI_ERROR__INVALID_AUTHORITY = 0x1771; // 6001
/** ImmutableAuthority: Authority is immutable (renounced) */
export const SATI_ERROR__IMMUTABLE_AUTHORITY = 0x1772; // 6002
/** NameTooLong: Name too long (max 32 bytes) */
export const SATI_ERROR__NAME_TOO_LONG = 0x1773; // 6003
/** SymbolTooLong: Symbol too long (max 10 bytes) */
export const SATI_ERROR__SYMBOL_TOO_LONG = 0x1774; // 6004
/** UriTooLong: URI too long (max 200 bytes) */
export const SATI_ERROR__URI_TOO_LONG = 0x1775; // 6005
/** TooManyMetadataEntries: Too many metadata entries (max 10) */
export const SATI_ERROR__TOO_MANY_METADATA_ENTRIES = 0x1776; // 6006
/** MetadataKeyTooLong: Metadata key too long (max 32 bytes) */
export const SATI_ERROR__METADATA_KEY_TOO_LONG = 0x1777; // 6007
/** MetadataValueTooLong: Metadata value too long (max 200 bytes) */
export const SATI_ERROR__METADATA_VALUE_TOO_LONG = 0x1778; // 6008
/** Overflow: Arithmetic overflow */
export const SATI_ERROR__OVERFLOW = 0x1779; // 6009
/** MintAuthorityNotRenounced: Failed to renounce mint authority - supply guarantee violated */
export const SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED = 0x177a; // 6010
/** SchemaConfigNotFound: Schema config not found */
export const SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND = 0x177b; // 6011
/** InvalidSignatureCount: Invalid signature count for signature mode */
export const SATI_ERROR__INVALID_SIGNATURE_COUNT = 0x177c; // 6012
/** InvalidSignature: Invalid Ed25519 signature */
export const SATI_ERROR__INVALID_SIGNATURE = 0x177d; // 6013
/** StorageTypeNotSupported: Storage type not supported for this operation */
export const SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED = 0x177e; // 6014
/** StorageTypeMismatch: Storage type mismatch */
export const SATI_ERROR__STORAGE_TYPE_MISMATCH = 0x177f; // 6015
/** AttestationDataTooSmall: Attestation data too small (minimum 130 bytes for universal base layout) */
export const SATI_ERROR__ATTESTATION_DATA_TOO_SMALL = 0x1780; // 6016
/** AttestationDataTooLarge: Attestation data exceeds maximum size */
export const SATI_ERROR__ATTESTATION_DATA_TOO_LARGE = 0x1781; // 6017
/** ContentTooLarge: Content exceeds maximum size (512 bytes) */
export const SATI_ERROR__CONTENT_TOO_LARGE = 0x1782; // 6018
/** SignatureMismatch: Signature pubkey does not match expected account */
export const SATI_ERROR__SIGNATURE_MISMATCH = 0x1783; // 6019
/** SelfAttestationNotAllowed: Self-attestation is not allowed (token_account == counterparty) */
export const SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED = 0x1784; // 6020
/** AgentAtaMintMismatch: Agent ATA mint does not match token_account in attestation data */
export const SATI_ERROR__AGENT_ATA_MINT_MISMATCH = 0x1785; // 6021
/** AgentAtaEmpty: Agent ATA is empty - signer does not own the agent NFT */
export const SATI_ERROR__AGENT_ATA_EMPTY = 0x1786; // 6022
/** AgentAtaRequired: Agent ATA required for this signature mode */
export const SATI_ERROR__AGENT_ATA_REQUIRED = 0x1787; // 6023
/** UnauthorizedClose: Unauthorized to close attestation */
export const SATI_ERROR__UNAUTHORIZED_CLOSE = 0x1788; // 6024
/** AttestationNotCloseable: Attestation cannot be closed for this schema */
export const SATI_ERROR__ATTESTATION_NOT_CLOSEABLE = 0x1789; // 6025
/** InvalidOutcome: Invalid outcome value (must be 0, 1, or 2) */
export const SATI_ERROR__INVALID_OUTCOME = 0x178a; // 6026
/** InvalidContentType: Invalid content type (must be 0-15) */
export const SATI_ERROR__INVALID_CONTENT_TYPE = 0x178b; // 6027
/** UnsupportedLayoutVersion: Unsupported layout version */
export const SATI_ERROR__UNSUPPORTED_LAYOUT_VERSION = 0x178c; // 6028
/** LightCpiInvocationFailed: Light Protocol CPI invocation failed */
export const SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED = 0x178d; // 6029
/** InvalidEd25519Instruction: Invalid Ed25519 instruction format */
export const SATI_ERROR__INVALID_ED25519_INSTRUCTION = 0x178e; // 6030
/** MissingSignatures: Missing required Ed25519 signatures in transaction */
export const SATI_ERROR__MISSING_SIGNATURES = 0x178f; // 6031
/** MessageMismatch: Message hash mismatch - signature was for different data */
export const SATI_ERROR__MESSAGE_MISMATCH = 0x1790; // 6032
/** InvalidInstructionsSysvar: Invalid instructions sysvar */
export const SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR = 0x1791; // 6033
/** DuplicateSigners: Duplicate signers not allowed for dual signature mode */
export const SATI_ERROR__DUPLICATE_SIGNERS = 0x1792; // 6034
/** Ed25519InstructionNotFound: No Ed25519 instruction found in transaction */
export const SATI_ERROR__ED25519_INSTRUCTION_NOT_FOUND = 0x1793; // 6035
/** AgentSignatureNotFound: Agent's Ed25519 signature not found (message content mismatch) */
export const SATI_ERROR__AGENT_SIGNATURE_NOT_FOUND = 0x1794; // 6036
/** CounterpartySignatureNotFound: Counterparty's Ed25519 signature not found (message content mismatch) */
export const SATI_ERROR__COUNTERPARTY_SIGNATURE_NOT_FOUND = 0x1795; // 6037
/** OwnerOnly: Schema requires owner signature but delegate attempted */
export const SATI_ERROR__OWNER_ONLY = 0x1796; // 6038
/** DelegationAttestationRequired: Delegate signed but no delegation attestation provided */
export const SATI_ERROR__DELEGATION_ATTESTATION_REQUIRED = 0x1797; // 6039
/** InvalidDelegationPDA: Delegation attestation PDA doesn't match expected derivation */
export const SATI_ERROR__INVALID_DELEGATION_P_D_A = 0x1798; // 6040
/** DelegateMismatch: Delegation attestation delegate doesn't match signer */
export const SATI_ERROR__DELEGATE_MISMATCH = 0x1799; // 6041
/** AgentMintMismatch: Delegation attestation agent doesn't match target agent */
export const SATI_ERROR__AGENT_MINT_MISMATCH = 0x179a; // 6042
/** DelegationOwnerMismatch: Delegation was created by different owner (NFT was transferred) */
export const SATI_ERROR__DELEGATION_OWNER_MISMATCH = 0x179b; // 6043
/** DelegationExpired: Delegation attestation has expired */
export const SATI_ERROR__DELEGATION_EXPIRED = 0x179c; // 6044
/** InvalidSecp256k1Signature: Invalid secp256k1 signature */
export const SATI_ERROR__INVALID_SECP256K1_SIGNATURE = 0x179d; // 6045
/** Secp256k1RecoveryFailed: Secp256k1 recovery failed */
export const SATI_ERROR__SECP256K1_RECOVERY_FAILED = 0x179e; // 6046
/** EvmAddressMismatch: EVM address mismatch - recovered address does not match expected */
export const SATI_ERROR__EVM_ADDRESS_MISMATCH = 0x179f; // 6047
/** InvalidEvmAddressRecovery: Failed to extract EVM address from secp256k1 key recovery */
export const SATI_ERROR__INVALID_EVM_ADDRESS_RECOVERY = 0x17a0; // 6048

export type SatiError =
  | typeof SATI_ERROR__AGENT_ATA_EMPTY
  | typeof SATI_ERROR__AGENT_ATA_MINT_MISMATCH
  | typeof SATI_ERROR__AGENT_ATA_REQUIRED
  | typeof SATI_ERROR__AGENT_MINT_MISMATCH
  | typeof SATI_ERROR__AGENT_SIGNATURE_NOT_FOUND
  | typeof SATI_ERROR__ATTESTATION_DATA_TOO_LARGE
  | typeof SATI_ERROR__ATTESTATION_DATA_TOO_SMALL
  | typeof SATI_ERROR__ATTESTATION_NOT_CLOSEABLE
  | typeof SATI_ERROR__CONTENT_TOO_LARGE
  | typeof SATI_ERROR__COUNTERPARTY_SIGNATURE_NOT_FOUND
  | typeof SATI_ERROR__DELEGATE_MISMATCH
  | typeof SATI_ERROR__DELEGATION_ATTESTATION_REQUIRED
  | typeof SATI_ERROR__DELEGATION_EXPIRED
  | typeof SATI_ERROR__DELEGATION_OWNER_MISMATCH
  | typeof SATI_ERROR__DUPLICATE_SIGNERS
  | typeof SATI_ERROR__ED25519_INSTRUCTION_NOT_FOUND
  | typeof SATI_ERROR__EVM_ADDRESS_MISMATCH
  | typeof SATI_ERROR__IMMUTABLE_AUTHORITY
  | typeof SATI_ERROR__INVALID_AUTHORITY
  | typeof SATI_ERROR__INVALID_CONTENT_TYPE
  | typeof SATI_ERROR__INVALID_DELEGATION_P_D_A
  | typeof SATI_ERROR__INVALID_ED25519_INSTRUCTION
  | typeof SATI_ERROR__INVALID_EVM_ADDRESS_RECOVERY
  | typeof SATI_ERROR__INVALID_GROUP_MINT
  | typeof SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR
  | typeof SATI_ERROR__INVALID_OUTCOME
  | typeof SATI_ERROR__INVALID_SECP256K1_SIGNATURE
  | typeof SATI_ERROR__INVALID_SIGNATURE
  | typeof SATI_ERROR__INVALID_SIGNATURE_COUNT
  | typeof SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED
  | typeof SATI_ERROR__MESSAGE_MISMATCH
  | typeof SATI_ERROR__METADATA_KEY_TOO_LONG
  | typeof SATI_ERROR__METADATA_VALUE_TOO_LONG
  | typeof SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED
  | typeof SATI_ERROR__MISSING_SIGNATURES
  | typeof SATI_ERROR__NAME_TOO_LONG
  | typeof SATI_ERROR__OVERFLOW
  | typeof SATI_ERROR__OWNER_ONLY
  | typeof SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND
  | typeof SATI_ERROR__SECP256K1_RECOVERY_FAILED
  | typeof SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED
  | typeof SATI_ERROR__SIGNATURE_MISMATCH
  | typeof SATI_ERROR__STORAGE_TYPE_MISMATCH
  | typeof SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED
  | typeof SATI_ERROR__SYMBOL_TOO_LONG
  | typeof SATI_ERROR__TOO_MANY_METADATA_ENTRIES
  | typeof SATI_ERROR__UNAUTHORIZED_CLOSE
  | typeof SATI_ERROR__UNSUPPORTED_LAYOUT_VERSION
  | typeof SATI_ERROR__URI_TOO_LONG;

let satiErrorMessages: Record<SatiError, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  satiErrorMessages = {
    [SATI_ERROR__AGENT_ATA_EMPTY]: `Agent ATA is empty - signer does not own the agent NFT`,
    [SATI_ERROR__AGENT_ATA_MINT_MISMATCH]: `Agent ATA mint does not match token_account in attestation data`,
    [SATI_ERROR__AGENT_ATA_REQUIRED]: `Agent ATA required for this signature mode`,
    [SATI_ERROR__AGENT_MINT_MISMATCH]: `Delegation attestation agent doesn't match target agent`,
    [SATI_ERROR__AGENT_SIGNATURE_NOT_FOUND]: `Agent's Ed25519 signature not found (message content mismatch)`,
    [SATI_ERROR__ATTESTATION_DATA_TOO_LARGE]: `Attestation data exceeds maximum size`,
    [SATI_ERROR__ATTESTATION_DATA_TOO_SMALL]: `Attestation data too small (minimum 130 bytes for universal base layout)`,
    [SATI_ERROR__ATTESTATION_NOT_CLOSEABLE]: `Attestation cannot be closed for this schema`,
    [SATI_ERROR__CONTENT_TOO_LARGE]: `Content exceeds maximum size (512 bytes)`,
    [SATI_ERROR__COUNTERPARTY_SIGNATURE_NOT_FOUND]: `Counterparty's Ed25519 signature not found (message content mismatch)`,
    [SATI_ERROR__DELEGATE_MISMATCH]: `Delegation attestation delegate doesn't match signer`,
    [SATI_ERROR__DELEGATION_ATTESTATION_REQUIRED]: `Delegate signed but no delegation attestation provided`,
    [SATI_ERROR__DELEGATION_EXPIRED]: `Delegation attestation has expired`,
    [SATI_ERROR__DELEGATION_OWNER_MISMATCH]: `Delegation was created by different owner (NFT was transferred)`,
    [SATI_ERROR__DUPLICATE_SIGNERS]: `Duplicate signers not allowed for dual signature mode`,
    [SATI_ERROR__ED25519_INSTRUCTION_NOT_FOUND]: `No Ed25519 instruction found in transaction`,
    [SATI_ERROR__EVM_ADDRESS_MISMATCH]: `EVM address mismatch - recovered address does not match expected`,
    [SATI_ERROR__IMMUTABLE_AUTHORITY]: `Authority is immutable (renounced)`,
    [SATI_ERROR__INVALID_AUTHORITY]: `Invalid authority`,
    [SATI_ERROR__INVALID_CONTENT_TYPE]: `Invalid content type (must be 0-15)`,
    [SATI_ERROR__INVALID_DELEGATION_P_D_A]: `Delegation attestation PDA doesn't match expected derivation`,
    [SATI_ERROR__INVALID_ED25519_INSTRUCTION]: `Invalid Ed25519 instruction format`,
    [SATI_ERROR__INVALID_EVM_ADDRESS_RECOVERY]: `Failed to extract EVM address from secp256k1 key recovery`,
    [SATI_ERROR__INVALID_GROUP_MINT]: `Invalid group mint - must be owned by Token-2022 with TokenGroup extension`,
    [SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR]: `Invalid instructions sysvar`,
    [SATI_ERROR__INVALID_OUTCOME]: `Invalid outcome value (must be 0, 1, or 2)`,
    [SATI_ERROR__INVALID_SECP256K1_SIGNATURE]: `Invalid secp256k1 signature`,
    [SATI_ERROR__INVALID_SIGNATURE]: `Invalid Ed25519 signature`,
    [SATI_ERROR__INVALID_SIGNATURE_COUNT]: `Invalid signature count for signature mode`,
    [SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED]: `Light Protocol CPI invocation failed`,
    [SATI_ERROR__MESSAGE_MISMATCH]: `Message hash mismatch - signature was for different data`,
    [SATI_ERROR__METADATA_KEY_TOO_LONG]: `Metadata key too long (max 32 bytes)`,
    [SATI_ERROR__METADATA_VALUE_TOO_LONG]: `Metadata value too long (max 200 bytes)`,
    [SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED]: `Failed to renounce mint authority - supply guarantee violated`,
    [SATI_ERROR__MISSING_SIGNATURES]: `Missing required Ed25519 signatures in transaction`,
    [SATI_ERROR__NAME_TOO_LONG]: `Name too long (max 32 bytes)`,
    [SATI_ERROR__OVERFLOW]: `Arithmetic overflow`,
    [SATI_ERROR__OWNER_ONLY]: `Schema requires owner signature but delegate attempted`,
    [SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND]: `Schema config not found`,
    [SATI_ERROR__SECP256K1_RECOVERY_FAILED]: `Secp256k1 recovery failed`,
    [SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED]: `Self-attestation is not allowed (token_account == counterparty)`,
    [SATI_ERROR__SIGNATURE_MISMATCH]: `Signature pubkey does not match expected account`,
    [SATI_ERROR__STORAGE_TYPE_MISMATCH]: `Storage type mismatch`,
    [SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED]: `Storage type not supported for this operation`,
    [SATI_ERROR__SYMBOL_TOO_LONG]: `Symbol too long (max 10 bytes)`,
    [SATI_ERROR__TOO_MANY_METADATA_ENTRIES]: `Too many metadata entries (max 10)`,
    [SATI_ERROR__UNAUTHORIZED_CLOSE]: `Unauthorized to close attestation`,
    [SATI_ERROR__UNSUPPORTED_LAYOUT_VERSION]: `Unsupported layout version`,
    [SATI_ERROR__URI_TOO_LONG]: `URI too long (max 200 bytes)`,
  };
}

export function getSatiErrorMessage(code: SatiError): string {
  if (process.env.NODE_ENV !== "production") {
    return (satiErrorMessages as Record<SatiError, string>)[code];
  }

  return "Error message not available in production bundles.";
}

export function isSatiError<TProgramErrorCode extends SatiError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    SATI_PROGRAM_ADDRESS,
    code,
  );
}
