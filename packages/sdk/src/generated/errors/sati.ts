/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from "@solana/kit";
import { SATI_PROGRAM_ADDRESS } from "../programs";

/** InvalidGroupMint: Invalid group mint - must be owned by Token-2022 with TokenGroup extension */
export const SATI_ERROR__INVALID_GROUP_MINT = 0x1770; // 6000
/** InvalidAuthority: Invalid authority */
export const SATI_ERROR__INVALID_AUTHORITY = 0x1771; // 6001
/** ImmutableAuthority: Authority is immutable (renounced) */
export const SATI_ERROR__IMMUTABLE_AUTHORITY = 0x1772; // 6002
/** NameTooLong: Name too long (max 32 bytes) */
export const SATI_ERROR__NAME_TOO_LONG = 0x1773; // 6003
/** SymbolTooLong: Symbol too long (max 10 bytes) */
export const SATI_ERROR__SYMBOL_TOO_LONG = 0x1774; // 6004
/** UriTooLong: URI too long (max 200 bytes) */
export const SATI_ERROR__URI_TOO_LONG = 0x1775; // 6005
/** TooManyMetadataEntries: Too many metadata entries (max 10) */
export const SATI_ERROR__TOO_MANY_METADATA_ENTRIES = 0x1776; // 6006
/** MetadataKeyTooLong: Metadata key too long (max 32 bytes) */
export const SATI_ERROR__METADATA_KEY_TOO_LONG = 0x1777; // 6007
/** MetadataValueTooLong: Metadata value too long (max 200 bytes) */
export const SATI_ERROR__METADATA_VALUE_TOO_LONG = 0x1778; // 6008
/** Overflow: Arithmetic overflow */
export const SATI_ERROR__OVERFLOW = 0x1779; // 6009
/** MintAuthorityNotRenounced: Failed to renounce mint authority - supply guarantee violated */
export const SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED = 0x177a; // 6010
/** SchemaConfigNotFound: Schema config not found */
export const SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND = 0x177b; // 6011
/** InvalidSignatureCount: Invalid signature count for signature mode */
export const SATI_ERROR__INVALID_SIGNATURE_COUNT = 0x177c; // 6012
/** InvalidSignature: Invalid Ed25519 signature */
export const SATI_ERROR__INVALID_SIGNATURE = 0x177d; // 6013
/** StorageTypeNotSupported: Storage type not supported for this operation */
export const SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED = 0x177e; // 6014
/** StorageTypeMismatch: Storage type mismatch */
export const SATI_ERROR__STORAGE_TYPE_MISMATCH = 0x177f; // 6015
/** AttestationDataTooSmall: Attestation data too small (minimum 96 bytes for base layout) */
export const SATI_ERROR__ATTESTATION_DATA_TOO_SMALL = 0x1780; // 6016
/** AttestationDataTooLarge: Attestation data exceeds maximum size */
export const SATI_ERROR__ATTESTATION_DATA_TOO_LARGE = 0x1781; // 6017
/** ContentTooLarge: Content exceeds maximum size (512 bytes) */
export const SATI_ERROR__CONTENT_TOO_LARGE = 0x1782; // 6018
/** SignatureMismatch: Signature pubkey does not match expected account */
export const SATI_ERROR__SIGNATURE_MISMATCH = 0x1783; // 6019
/** SelfAttestationNotAllowed: Self-attestation is not allowed (token_account == counterparty) */
export const SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED = 0x1784; // 6020
/** UnauthorizedClose: Unauthorized to close attestation */
export const SATI_ERROR__UNAUTHORIZED_CLOSE = 0x1785; // 6021
/** AttestationNotCloseable: Attestation cannot be closed for this schema */
export const SATI_ERROR__ATTESTATION_NOT_CLOSEABLE = 0x1786; // 6022
/** InvalidOutcome: Invalid outcome value (must be 0-2) */
export const SATI_ERROR__INVALID_OUTCOME = 0x1787; // 6023
/** InvalidContentType: Invalid content type (must be 0-4) */
export const SATI_ERROR__INVALID_CONTENT_TYPE = 0x1788; // 6024
/** InvalidDataType: Invalid data type */
export const SATI_ERROR__INVALID_DATA_TYPE = 0x1789; // 6025
/** InvalidScore: Invalid score value (must be 0-100) */
export const SATI_ERROR__INVALID_SCORE = 0x178a; // 6026
/** InvalidResponse: Invalid validation response (must be 0-100) */
export const SATI_ERROR__INVALID_RESPONSE = 0x178b; // 6027
/** TagTooLong: Tag string exceeds maximum length (32 chars) */
export const SATI_ERROR__TAG_TOO_LONG = 0x178c; // 6028
/** InvalidDataLayout: Invalid data layout */
export const SATI_ERROR__INVALID_DATA_LAYOUT = 0x178d; // 6029
/** LightCpiInvocationFailed: Light Protocol CPI invocation failed */
export const SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED = 0x178e; // 6030
/** InvalidEd25519Instruction: Invalid Ed25519 instruction format */
export const SATI_ERROR__INVALID_ED25519_INSTRUCTION = 0x178f; // 6031
/** MissingSignatures: Missing required Ed25519 signatures in transaction */
export const SATI_ERROR__MISSING_SIGNATURES = 0x1790; // 6032
/** MessageMismatch: Message hash mismatch - signature was for different data */
export const SATI_ERROR__MESSAGE_MISMATCH = 0x1791; // 6033
/** InvalidInstructionsSysvar: Invalid instructions sysvar */
export const SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR = 0x1792; // 6034
/** DuplicateSigners: Duplicate signers not allowed for dual signature mode */
export const SATI_ERROR__DUPLICATE_SIGNERS = 0x1793; // 6035

export type SatiError =
  | typeof SATI_ERROR__ATTESTATION_DATA_TOO_LARGE
  | typeof SATI_ERROR__ATTESTATION_DATA_TOO_SMALL
  | typeof SATI_ERROR__ATTESTATION_NOT_CLOSEABLE
  | typeof SATI_ERROR__CONTENT_TOO_LARGE
  | typeof SATI_ERROR__DUPLICATE_SIGNERS
  | typeof SATI_ERROR__IMMUTABLE_AUTHORITY
  | typeof SATI_ERROR__INVALID_AUTHORITY
  | typeof SATI_ERROR__INVALID_CONTENT_TYPE
  | typeof SATI_ERROR__INVALID_DATA_LAYOUT
  | typeof SATI_ERROR__INVALID_DATA_TYPE
  | typeof SATI_ERROR__INVALID_ED25519_INSTRUCTION
  | typeof SATI_ERROR__INVALID_GROUP_MINT
  | typeof SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR
  | typeof SATI_ERROR__INVALID_OUTCOME
  | typeof SATI_ERROR__INVALID_RESPONSE
  | typeof SATI_ERROR__INVALID_SCORE
  | typeof SATI_ERROR__INVALID_SIGNATURE
  | typeof SATI_ERROR__INVALID_SIGNATURE_COUNT
  | typeof SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED
  | typeof SATI_ERROR__MESSAGE_MISMATCH
  | typeof SATI_ERROR__METADATA_KEY_TOO_LONG
  | typeof SATI_ERROR__METADATA_VALUE_TOO_LONG
  | typeof SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED
  | typeof SATI_ERROR__MISSING_SIGNATURES
  | typeof SATI_ERROR__NAME_TOO_LONG
  | typeof SATI_ERROR__OVERFLOW
  | typeof SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND
  | typeof SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED
  | typeof SATI_ERROR__SIGNATURE_MISMATCH
  | typeof SATI_ERROR__STORAGE_TYPE_MISMATCH
  | typeof SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED
  | typeof SATI_ERROR__SYMBOL_TOO_LONG
  | typeof SATI_ERROR__TAG_TOO_LONG
  | typeof SATI_ERROR__TOO_MANY_METADATA_ENTRIES
  | typeof SATI_ERROR__UNAUTHORIZED_CLOSE
  | typeof SATI_ERROR__URI_TOO_LONG;

let satiErrorMessages: Record<SatiError, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  satiErrorMessages = {
    [SATI_ERROR__ATTESTATION_DATA_TOO_LARGE]: `Attestation data exceeds maximum size`,
    [SATI_ERROR__ATTESTATION_DATA_TOO_SMALL]: `Attestation data too small (minimum 96 bytes for base layout)`,
    [SATI_ERROR__ATTESTATION_NOT_CLOSEABLE]: `Attestation cannot be closed for this schema`,
    [SATI_ERROR__CONTENT_TOO_LARGE]: `Content exceeds maximum size (512 bytes)`,
    [SATI_ERROR__DUPLICATE_SIGNERS]: `Duplicate signers not allowed for dual signature mode`,
    [SATI_ERROR__IMMUTABLE_AUTHORITY]: `Authority is immutable (renounced)`,
    [SATI_ERROR__INVALID_AUTHORITY]: `Invalid authority`,
    [SATI_ERROR__INVALID_CONTENT_TYPE]: `Invalid content type (must be 0-4)`,
    [SATI_ERROR__INVALID_DATA_LAYOUT]: `Invalid data layout`,
    [SATI_ERROR__INVALID_DATA_TYPE]: `Invalid data type`,
    [SATI_ERROR__INVALID_ED25519_INSTRUCTION]: `Invalid Ed25519 instruction format`,
    [SATI_ERROR__INVALID_GROUP_MINT]: `Invalid group mint - must be owned by Token-2022 with TokenGroup extension`,
    [SATI_ERROR__INVALID_INSTRUCTIONS_SYSVAR]: `Invalid instructions sysvar`,
    [SATI_ERROR__INVALID_OUTCOME]: `Invalid outcome value (must be 0-2)`,
    [SATI_ERROR__INVALID_RESPONSE]: `Invalid validation response (must be 0-100)`,
    [SATI_ERROR__INVALID_SCORE]: `Invalid score value (must be 0-100)`,
    [SATI_ERROR__INVALID_SIGNATURE]: `Invalid Ed25519 signature`,
    [SATI_ERROR__INVALID_SIGNATURE_COUNT]: `Invalid signature count for signature mode`,
    [SATI_ERROR__LIGHT_CPI_INVOCATION_FAILED]: `Light Protocol CPI invocation failed`,
    [SATI_ERROR__MESSAGE_MISMATCH]: `Message hash mismatch - signature was for different data`,
    [SATI_ERROR__METADATA_KEY_TOO_LONG]: `Metadata key too long (max 32 bytes)`,
    [SATI_ERROR__METADATA_VALUE_TOO_LONG]: `Metadata value too long (max 200 bytes)`,
    [SATI_ERROR__MINT_AUTHORITY_NOT_RENOUNCED]: `Failed to renounce mint authority - supply guarantee violated`,
    [SATI_ERROR__MISSING_SIGNATURES]: `Missing required Ed25519 signatures in transaction`,
    [SATI_ERROR__NAME_TOO_LONG]: `Name too long (max 32 bytes)`,
    [SATI_ERROR__OVERFLOW]: `Arithmetic overflow`,
    [SATI_ERROR__SCHEMA_CONFIG_NOT_FOUND]: `Schema config not found`,
    [SATI_ERROR__SELF_ATTESTATION_NOT_ALLOWED]: `Self-attestation is not allowed (token_account == counterparty)`,
    [SATI_ERROR__SIGNATURE_MISMATCH]: `Signature pubkey does not match expected account`,
    [SATI_ERROR__STORAGE_TYPE_MISMATCH]: `Storage type mismatch`,
    [SATI_ERROR__STORAGE_TYPE_NOT_SUPPORTED]: `Storage type not supported for this operation`,
    [SATI_ERROR__SYMBOL_TOO_LONG]: `Symbol too long (max 10 bytes)`,
    [SATI_ERROR__TAG_TOO_LONG]: `Tag string exceeds maximum length (32 chars)`,
    [SATI_ERROR__TOO_MANY_METADATA_ENTRIES]: `Too many metadata entries (max 10)`,
    [SATI_ERROR__UNAUTHORIZED_CLOSE]: `Unauthorized to close attestation`,
    [SATI_ERROR__URI_TOO_LONG]: `URI too long (max 200 bytes)`,
  };
}

export function getSatiErrorMessage(code: SatiError): string {
  if (process.env.NODE_ENV !== "production") {
    return (satiErrorMessages as Record<SatiError, string>)[code];
  }

  return "Error message not available in production bundles.";
}

export function isSatiError<TProgramErrorCode extends SatiError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    SATI_PROGRAM_ADDRESS,
    code,
  );
}
